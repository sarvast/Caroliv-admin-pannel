(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{2601:function(e,t,r){"use strict";var s,n;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(8960)},6062:function(e,t,r){Promise.resolve().then(r.bind(r,7568))},7568:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r(7437),n=r(2265),o=r(4033),a=r(826),i=r(6728);let l=["Grains","Protein","Fruits","Vegetables","Dairy","Snacks","Beverages","Sweets","Other"];function c(){let e=(0,o.useRouter)(),[t,r]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,x]=(0,n.useState)(""),[m,h]=(0,n.useState)({category:"",search:""});(0,n.useEffect)(()=>{if(!localStorage.getItem("admin_token")){e.push("/admin/login");return}f()},[m.category]);let f=async()=>{try{d(!0),x("");let e=await a.h.getFoods(m.category);r(e.data||[])}catch(e){console.error("Failed to load foods:",e),x(e.message||"Failed to load foods")}finally{d(!1)}},g=async(e,t)=>{if(confirm('Are you sure you want to delete "'.concat(t,'"?')))try{await a.h.deleteFood(e),f()}catch(e){alert(e.message||"Failed to delete food")}},p=t.filter(e=>{var t,r,s,n;if(!m.search)return!0;let o=m.search.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(o))||(null===(r=e.nameHindi)||void 0===r?void 0:r.toLowerCase().includes(o))||(null===(s=e.category)||void 0===s?void 0:s.toLowerCase().includes(o))||(null===(n=e.searchTerms)||void 0===n?void 0:n.toLowerCase().includes(o))});return(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Foods"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage food items database"})]}),(0,s.jsx)("button",{onClick:()=>e.push("/admin/foods/new"),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all",children:"+ Add Food"})]}),u&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-6",children:u}),(0,s.jsx)(i.Z,{className:"p-6 mb-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Search"}),(0,s.jsx)("input",{type:"text",value:m.search,onChange:e=>h({...m,search:e.target.value}),placeholder:"Search by name, Hindi name, or keywords...",className:"w-full px-4 py-2 bg-input border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category"}),(0,s.jsxs)("select",{value:m.category,onChange:e=>h({...m,category:e.target.value}),className:"w-full px-4 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),l.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:()=>h({category:"",search:""}),className:"w-full px-4 py-2 bg-secondary border border-border rounded-lg text-secondary-foreground hover:bg-accent transition-all",children:"Clear Filters"})})]})}),(0,s.jsx)(i.Z,{className:"overflow-hidden",children:c?(0,s.jsxs)("div",{className:"p-12 text-center text-muted-foreground",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,s.jsx)("p",{className:"mt-4",children:"Loading foods..."})]}):0===p.length?(0,s.jsxs)("div",{className:"p-12 text-center text-muted-foreground",children:[(0,s.jsx)("p",{className:"text-lg",children:"No foods found"}),(m.search||m.category)&&(0,s.jsx)("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-muted/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground",children:"Image"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground",children:"Hindi Name"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground",children:"Calories"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground",children:"Macros (P/C/F)"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right text-sm font-semibold text-foreground",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border",children:p.map(t=>(0,s.jsxs)("tr",{className:"hover:bg-accent/50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:t.imageUrl?(0,s.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-12 h-12 rounded-lg object-cover border border-border",onError:e=>{e.target.style.display="none";let r=e.target.parentElement;r&&t.emoji&&(r.innerHTML='<div class="w-12 h-12 rounded-lg bg-secondary flex items-center justify-center text-2xl">'.concat(t.emoji,"</div>"))}}):t.emoji?(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-secondary flex items-center justify-center text-2xl",children:t.emoji}):(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-secondary flex items-center justify-center text-muted-foreground text-xs",children:"\uD83C\uDF7D️"})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"text-foreground font-medium",children:t.name}),t.servingSize&&(0,s.jsx)("div",{className:"text-muted-foreground text-sm mt-1",children:t.servingSize})]}),(0,s.jsx)("td",{className:"px-6 py-4 text-muted-foreground",children:t.nameHindi}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-500/20 text-blue-600 dark:text-blue-300 capitalize",children:t.category})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"text-foreground font-medium",children:t.calories}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:"kcal"})]}),(0,s.jsx)("td",{className:"px-6 py-4",children:t.protein||t.carbs||t.fat?(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{className:"text-green-600 dark:text-green-300",children:[t.protein||0,"g"]})," / ",(0,s.jsxs)("span",{className:"text-yellow-600 dark:text-yellow-300",children:[t.carbs||0,"g"]})," / ",(0,s.jsxs)("span",{className:"text-orange-600 dark:text-orange-300",children:[t.fat||0,"g"]})]}):(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(!1!==t.isActive?"bg-green-500/20 text-green-600 dark:text-green-300":"bg-muted text-muted-foreground"),children:!1!==t.isActive?"Active":"Inactive"})}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,s.jsx)("button",{onClick:()=>e.push("/admin/foods/".concat(t.id,"/edit")),className:"text-blue-600 dark:text-blue-400 hover:opacity-80 font-medium transition-colors",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>g(t.id,t.name),className:"text-red-600 dark:text-red-400 hover:opacity-80 font-medium transition-colors",children:"Delete"})]})]},t.id))})]})}),(0,s.jsx)("div",{className:"md:hidden space-y-4 p-4",children:p.map(t=>(0,s.jsxs)("div",{className:"bg-card/50 rounded-lg p-4 border border-border space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[t.imageUrl?(0,s.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-16 h-16 rounded-lg object-cover border border-border"}):t.emoji?(0,s.jsx)("div",{className:"w-16 h-16 rounded-lg bg-secondary flex items-center justify-center text-3xl",children:t.emoji}):(0,s.jsx)("div",{className:"w-16 h-16 rounded-lg bg-secondary flex items-center justify-center text-muted-foreground text-xl",children:"\uD83C\uDF7D️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground text-lg",children:t.name}),t.nameHindi&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm font-hindi",children:t.nameHindi}),(0,s.jsx)("span",{className:"inline-block mt-1 text-xs px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-600 dark:text-blue-300 capitalize",children:t.category})]})]}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(!1!==t.isActive?"bg-green-500/20 text-green-600 dark:text-green-300":"bg-muted text-muted-foreground"),children:!1!==t.isActive?"Active":"Inactive"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-2 border-y border-border/50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase",children:"Calories"}),(0,s.jsxs)("p",{className:"font-semibold text-foreground",children:[t.calories," kcal"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase",children:"Serving"}),(0,s.jsx)("p",{className:"font-semibold text-foreground",children:t.servingSize||"-"})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:t.protein||t.carbs||t.fat?(0,s.jsxs)("div",{className:"text-sm font-medium space-x-2",children:[(0,s.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:["P: ",t.protein||0]}),(0,s.jsxs)("span",{className:"text-yellow-600 dark:text-yellow-400",children:["C: ",t.carbs||0]}),(0,s.jsxs)("span",{className:"text-orange-600 dark:text-orange-400",children:["F: ",t.fat||0]})]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No macros"})}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)("button",{onClick:()=>e.push("/admin/foods/".concat(t.id,"/edit")),className:"flex-1 py-2 rounded-lg bg-primary/10 text-primary font-medium hover:bg-primary/20 transition-colors",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>g(t.id,t.name),className:"flex-1 py-2 rounded-lg bg-destructive/10 text-destructive font-medium hover:bg-destructive/20 transition-colors",children:"Delete"})]})]},t.id))})]})}),!c&&p.length>0&&(0,s.jsxs)("div",{className:"mt-6 text-center text-gray-400 text-sm",children:["Showing ",p.length," of ",t.length," foods"]})]})})}},6728:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(7437);function n(e){let{children:t,className:r="",...n}=e;return(0,s.jsx)("div",{className:"bg-card/80 backdrop-blur-lg rounded-xl border border-border shadow-lg transition-colors duration-300 ".concat(r),...n,children:t})}},826:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});let s=r(2601).env.NEXT_PUBLIC_ADMIN_KEY||"your-admin-api-key",n={async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",body:n,requiresAuth:o=!1}=t,a={"Content-Type":"application/json"};o&&(a["X-Admin-Key"]=s);let i={method:r,headers:a};n&&(i.body=JSON.stringify(n));try{let t;let r=await fetch("".concat("http://20.197.14.33:3000/api").concat(e),i);try{t=await r.json()}catch(e){t={}}if(!r.ok)throw Error(t.message||t.error||"Request failed with status ".concat(r.status));return t}catch(e){if(e.message)throw e;throw Error("Network error. Please check your connection and backend status.")}},async getExercises(e,t,r){let s="/exercises",n=new URLSearchParams;return e&&n.append("category",e),t&&n.append("difficulty",t),r&&n.append("search",r),n.toString()&&(s+="?".concat(n.toString())),this.call(s,{requiresAuth:!1})},async createExercise(e){return this.call("/admin/exercises",{method:"POST",body:e})},async updateExercise(e,t){return this.call("/admin/exercises/".concat(e),{method:"PUT",body:t})},async deleteExercise(e){return this.call("/admin/exercises/".concat(e),{method:"DELETE"})},async getFoods(e){let t="/foods";return e&&(t+="?category=".concat(e)),this.call(t,{requiresAuth:!1})},async createFood(e){return this.call("/admin/foods",{method:"POST",body:e})},async updateFood(e,t){return this.call("/admin/foods/".concat(e),{method:"PUT",body:t})},async deleteFood(e){return this.call("/admin/foods/".concat(e),{method:"DELETE"})},async adminLogin(e,t){if("ss8971132@gmail.com"===e&&"##hellosarvasva69"===t)return{success:!0,token:"admin_token_caroliv"};throw Error("Invalid email or password")}}},8960:function(e){!function(){var t={229:function(e){var t,r,s,n=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?l=s.concat(l):d=-1,l.length&&x())}function x(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||c||i(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}},a=!0;try{t[e](o,o.exports,s),a=!1}finally{a&&delete r[e]}return o.exports}s.ab="//";var n=s(229);e.exports=n}()},622:function(e,t,r){"use strict";var s=r(2265),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,o={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===o[s]&&(o[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:o,_owner:i.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=6062)}),_N_E=e.O()}]);